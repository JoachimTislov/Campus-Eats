@using Mor_Qui_Sun_Tis_Lau.Helpers
@using Mor_Qui_Sun_Tis_Lau.Pages.Home.ViewModels
@model LoginViewModel

<h1> Welcome back! </h1>
<form method="post" asp-page-handler="Login">
    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
            <strong> @Model.ErrorMessage </strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    <div class="mb-2 form-group">
        <div class="form-floating">
            <input asp-for="Email" id="loginEmail" type="email" placeholder="Email"
                class="form-control CredsInputField " required />
            <label for="loginEmail"> Email </label>
        </div>
        <span asp-validation-for="Email" class="text-danger"></span>
    </div>
    <div class="form-group">
        <div class="form-floating">
            <input asp-for="Password" id="loginPassword" type="password" placeholder="Password"
                class="form-control CredsInputField " required />
            <label for="loginPassword"> Password </label>
        </div>
        <span asp-validation-for="Password" class="text-danger"></span>
    </div>
    <div class="accent flexBetween">
        <a asp-area="" asp-page="@UrlProvider.ForgotPassword">
            Forgot password?
        </a>
    </div>

    <button class="SubmitButton" type="submit"> Login </button>

    <div>
        <br><br>
        <p>Or continue with:</p>
        <br>
        <a asp-page-handler="ExternalLogin" asp-route-provider="Google" class="social-login-btn google-login">
            <svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20" height="20">
                <path fill="#4285F4"
                    d="M24 9.5c3.8 0 7.2 1.5 9.7 4.1l7.1-7.1C36.5 2.6 30.5 0 24 0 14.7 0 6.9 5.2 2.5 12.9l8.4 6.5C13.3 13.1 18.2 9.5 24 9.5z" />
                <path fill="#34A853"
                    d="M46.5 24.5c0-1.6-.2-3.3-.5-4.8H24v9.1h12.9c-1.1 5.2-4.7 9.6-9.4 11.7l8.4 6.5c6.2-5.7 10-14.2 10-22.5z" />
                <path fill="#FBBC05"
                    d="M12.9 27.4a14.6 14.6 0 0 1 0-9.1l-8.4-6.5c-2.1 4.1-3.3 8.7-3.3 13.6s1.2 9.5 3.3 13.6l8.4-6.5z" />
                <path fill="#EA4335"
                    d="M24 48c6.5 0 12.3-2.1 16.9-5.8l-8.4-6.5c-2.4 1.4-5.2 2.2-8.5 2.2-5.8 0-10.7-3.6-12.5-8.5l-8.4 6.5C6.9 42.8 14.7 48 24 48z" />
            </svg>
            <span>Sign in with Google</span>
        </a>

        <a asp-page-handler="ExternalLogin" asp-route-provider="Facebook" class="social-login-btn facebook-login">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg"
                alt="Facebook Logo" class="social-icon">
            <span>Continue with Facebook</span>
        </a>

    </div>
    <p></p>
    @if (Context.Request.Query["error"] == "access_denied")
    {
        <div class="alert alert-danger">Access was denied by 3rd Party. Please try again.</div>
    }
</form>

<style>
    .social-login-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        text-decoration: none;
        color: #333;
        transition: background-color 0.3s ease;
        width: 100%;
        /* Set width to 100% for a more app-like look */
        max-width: 280px;
        /* Optional: to keep button width uniform */
        margin-bottom: 1rem;
        cursor: pointer;
    }

    .social-login-btn .social-icon {
        width: 20px;
        height: 20px;
        margin-right: 0.5rem;
    }

    .google-login {
        background-color: #ffffff;
        border: 1px solid #ddd;
        color: #333;
    }

    .google-login:hover {
        background-color: #f7f7f7;
    }

    .facebook-login {
        background-color: #1877f2;
        color: white;
        border: none;
    }

    .facebook-login:hover {
        background-color: #166fe1;
    }
</style>
